# Next.js

突然对 NextJs 很感兴趣，先在 b 站上找到一个 NextJs 教程，但是我对于这类应用型的知识只听讲实在是很难进入到我的大脑，所以直接就在官网上的教程开始，这是一个构建一个 blog 的教程

先记录下我目前对于 NextJs 的认识

一个应用于生产环境的 React 框架，很牛逼的宣告，生产、框架，这个生产分量很重啊

## 路由

第一个感触，无需路由，直接在 pages 下建立目录或者文件即可创建一个页面，无需路由，页面跳转使用 next/link 的 Link 组件，直接使用相对位置跳转，也就是 pages/posts/first-post.js，那么只需要

```js
<Link href="/posts/first-post">Back to home</Link>
```

## 静态资源

直接在 public 中添加静态资源，例如图片，引用方式和路由跳转一致，相对位置，从 public 开始，例如 public/images/profile.jpg，当然也需要使用 next/image 引入 Image 组件

```js
<Image
  priority
  src="/images/profile.jpg"
  className={utilStyles.borderCircle}
  height={144}
  width={144}
  alt=""
/>
```

这个组件还可以优化图片体验，至于怎么优化的不知道，但是按照教程，建议使用

## 静态渲染和服务器渲染

教程特别强调了 NextJs 的服务器渲染 SSR 和客户端渲染 CSR，好处大致就是两点，一个是更好的页面体验，一个是 SEO，也就是搜索引擎。

而且服务器渲染也分为两种方式，一个是静态生成，一个是动态呈现（翻译是服务器呈现），我理解是静态就是页面对于所有人都是一样，之前的 Hexo 也是类似，而动态渲染，则是根据用户请求来渲染，属于实时渲染。但是 NextJs 强调这两种模式是可以同时存在，根据自己的需要来划分。

我其实有一个疑惑，这服务端渲染了，那不就是后端的事吗？

关于静态和动态的选择，官网有一个原则

您应该问自己：“我可以在用户请求之前预呈现此页面吗？如果答案是肯定的，那么您应该选择静态生成。

另一方面，如果您无法在用户请求之前预呈现页面，则静态生成不是一个好主意。也许您的网页会显示频繁更新的数据，并且网页内容会随着每次请求而更改。

在这种情况下，您可以使用服务器端呈现。它将更慢，但预呈现的页面将始终是最新的。或者，您可以跳过预呈现并使用客户端 JavaScript 来填充经常更新的数据。

动态的看样子 NextJs 并不是最好的选择，而是 CSR，也可以理解，动态呈现意味需要反复利用网络传输，这个性能放在本地只需要服务器提供必要的数据体验效果更好

## 有点意思

NextJs 很看重 SEO，也就是搜索引擎的搜索蜘蛛，那他的定位应该是为了方便展示的网站，最好是大家看一样的网站，这不就天生为了新闻网站做的吗

还有 SWR

我在学习时一直想的都是 UmiJs，它和 NextJs 到底有什么不一样，或者说他们的定位有哪些是重叠的哪些是更擅长的

## 各种约定

想要速度生产项目果然需要的是各种约定，想要自由发挥，那就是理解底层后定制自己的工具集

NextJS 和 UmiJS 都属于大公司自己对于业务深入理解后定制自己的元工具，是不是到了这个层面，技术不是重点，对于事物的取舍，业务逻辑的深入思考反倒是这类工具的核心吧

这不就是最佳实践吗

## 这个静态生成和 API 有点懵

我也说不好这两个有什么不一样或者他们根本不一致

## 部署

注册过程实在是顺利，只是在手机号码上我犹豫了，因为手机号码已经算是身份证的唯一 ID 了，但是我看了 Vercel 的设置，暂时没有找到修改手机号码的选项，可能真的如注册时宣称的，只是用于认证，不会再发任何消息，也就是说他仅仅只是用这个来验证你是一个人，还有就是明确注册人来自何处。

## 开发原则

开发-预览-部署

开发：在原来的主分支分开一个开发分支

预览：测试是否可以达到预期效果

部署：推送到主分支，自动化部署
